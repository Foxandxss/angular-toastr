angular.module("toastr",[]).directive("toast",["$timeout","toastr",function(a,b){return{replace:!0,template:'<div class="{{toastClass}} {{toastType}}" ng-click="tapToast()"><button ng-if="options.closeButton" class="toast-close-button" ng-click="close()">&times;</button><div ng-if="title" class="{{titleClass}}" ng-click="fn()">{{title}}</div><div ng-switch on="messageType"><div ng-switch-when="trusted" class="{{messageClass}}" ng-bind-html="message"></div><div ng-switch-default class="{{messageClass}}">{{message}}</div></div></div>',link:function(c,d){function e(d){return a(function(){b.remove(c.toastId)},d)}var f;c.toastClass=c.options.toastClass,c.titleClass=c.options.titleClass,c.messageClass=c.options.messageClass,c.init=function(){c.options.timeOut&&(f=e(c.options.timeOut))},d.on("mouseenter",function(){f&&a.cancel(f)}),c.tapToast=function(){c.options.tapToDismiss&&c.close()},c.close=function(){b.remove(c.toastId)},d.on("mouseleave",function(){(0!==c.options.timeOut||0!==c.options.extendedTimeOut)&&(f=e(c.options.extendedTimeOut))})}}}]).constant("toastrConfig",{allowHtml:!1,closeHtml:"<button>&times;</button>",containerId:"toast-container",extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},messageClass:"toast-message",positionClass:"toast-top-right",tapToDismiss:!0,timeOut:5e3,titleClass:"toast-title",toastClass:"toast"}).factory("toastr",["$animate","$compile","$document","$rootScope","$sce","toastrConfig","$q",function(a,b,c,d,e,f,g){function h(a){if(a)p(a.toastId);else for(var b=0;b<s.length;b++)p(s[b].toastId)}function i(a,b,c){return o({iconClass:m().iconClasses.error,message:a,optionsOverride:c,title:b})}function j(a,b,c){return o({iconClass:m().iconClasses.info,message:a,optionsOverride:c,title:b})}function k(a,b,c){return o({iconClass:m().iconClasses.success,message:a,optionsOverride:c,title:b})}function l(a,b,c){return o({iconClass:m().iconClasses.warning,message:a,optionsOverride:c,title:b})}function m(){return angular.extend({},f)}function n(b){if(q)return t.promise;q=angular.element("<div></div>"),q.attr("id",b.containerId),q.addClass(b.positionClass);var d=c.find("body").eq(0);return a.enter(q,d,null,function(){t.resolve()}),t.promise}function o(c){function f(a,b,c){b.title&&(a.scope.title=b.title),c.allowHtml?(a.scope.messageType="trusted",a.scope.message=e.trustAsHtml(b.message)):a.scope.message=b.message,a.scope.toastType=a.iconClass,a.scope.toastId=a.toastId,a.scope.options={closeButton:c.closeButton,extendedTimeOut:c.extendedTimeOut,messageClass:c.messageClass,tapToDismiss:c.tapToDismiss,timeOut:c.timeOut,titleClass:c.titleClass,toastClass:c.toastClass}}function g(a){var c=angular.element("<div toast></div>");return b(c)(a)}var h=m(),i={toastId:r++,scope:d.$new()};return i.iconClass=c.iconClass,c.optionsOverride&&(h=angular.extend(h,c.optionsOverride),i.iconClass=c.optionsOverride.iconClass||i.iconClass),f(i,c,h),i.el=g(i.scope),s.push(i),n(h).then(function(){a.enter(i.el,q,null,function(){i.scope.init()})}),i}function p(b){function c(a){for(var b=0;b<s.length;b++)if(s[b].toastId===a)return s[b]}var d=c(b);d&&a.leave(d.el,function(){d.scope.$destroy(),q&&0===q.children().length&&(s=[],q.remove(),q=null,t=g.defer())})}var q,r=0,s=[],t=g.defer(),u={clear:h,error:i,info:j,remove:p,success:k,warning:l};return u}]);